# 计算机网络
## 第一章
* 局域网LAN：互联主机
* 广域网WAN：互联交换机、路由器、调制解调器等连接设备
* 互联网：两个或多个网络连接起来
* 交换：1.电路交换网络。2.分组交换网络
* 主干和提供者网络ISP
* 协议分层(protocol layering)
* **TCP/IP的5层协议模型**：
* 1.应用层：上层数据
* 2.传输层：TCP头+上层数据
* 3.网络层 IP头+TCP+上层数据（数据包）
* 4.数据链路层：MAC头+网络层数据+FCS
*  5 .物理层:Bit流
* **OSI模型**：
* 1:应用层：所有能产生网络流量的程序
* 2：表示层：在传输压缩之前是否进行加密或压缩处理二进制ASCII
* 3.会话层：查木马 netstat -n
* 4.传输层：可靠传输 流量控制 不可靠传输
* 5.网络层：负责选择最佳路径，规划ip地址
* 6.数据链路层:帧的开始和结束,透明传输差错校验
* 7.物理层：接口标准，电器标准，如何在物理链路上传输更快的速度
* **分层故障分析：**
* 1.物理层故障： 查看连接状态 发送和接收的数据包
* 2.数据链路层故障：MAC地址冲突、欠费、网速没办法协商一致、计算机连接到错误vlan
* 3.网络层故障：ip地址、子网掩码、网关等配置错误
* 4.应用层故障：应用程序配置错误
* **OSI参考模型和网络安全**
* 1.物理层安全：数据线和口要保护好
* 2.数据链路层安全：账号密码
* 3.网络层安全：在路由器上使用ACL控制数据包流量
* 4.应用层安全:开发的应用程序没有漏洞
* **计算机网络的性能**
* 1.速率：网络主机在数字信道上传送数据位数的速率
* 2.带宽：数字信道上所能传最高数据率
* 3.吞吐量：单位时间内通过某个网络的数据量
* 4.时延
* 5.时延带宽积：传播时延x宽带
* 6.往返时间
### 使用wireshark来进行网络抓包
* Frame:   物理层的数据帧概况

* Ethernet II: 数据链路层以太网帧头部信息

* Internet Protocol Version 4: 互联网层IP包头部信息
* Transmission Control Protocol:  传输层T的数据段头部信息，此处是TCP
* Hypertext Transfer Protocol:  应用层的信息，此处是HTTP协议
* **TCP三次握手：**
* 1.客户端发送一个TCP，标志位为SYN，序列号为0， 代表客户端请求建立连接
* 2.服务器发回确认包, 标志位为 SYN,ACK. 将确认序号(Acknowledgement Number)设置为客户的I S N加1以.即0+1=1
* 3.客户端再次发送确认包(ACK) SYN标志位为0,ACK标志位为1.并且把服务器发来ACK的序号字段+1,放在确定字段中发送给对方.并且在数据段放写ISN的+1
* **MAC地址（物理地址）**：出厂时就固定在网卡芯片上（48位2进制）
* 数据包：ip地址包
* 数据帧：ip地址+Mac地址的信息--通过改变Mac地址，来传递数据包
* DNS：解析域名为ip地址
## 数据链路层--帧
* 信道类型：1.点对点 2.广播
* 链路(link):一条点对点的物理线路段
* 数据链路（data link）：除了物理段线路外还有协议
* **三个基本问题：**
* 1.封装成帧
* 2.透明传输--字符填充的方式
* 3.差错控制：CRC计算检测
* ppp协议
## 应用层
* **域名服务DNS：**
* 作用：负责解析域名 将域名解析成IP
* **域名解析测试：**
* ping www.baidu.com
* **域名解析过程：**
* 分布式。com、net、edu、cn各分布，反问com来去net时，通过根DNS来进行告知返回net的ip地址。一次解析后，之后可以通过缓存来访问，而不需要再解析。
* **安装自己的DNS服务器**
* 1.解析内网自己的域名
* 2.节省到Internet的域名解析流量
* 3.域环境
* 4.配置完本地DNS时，如果配置了.根区域，则自己没有查到记录区域时候，不会再往外发送请求
* **动态主机配置协议DHCP服务器**
* 静态IP地址：服务器，教师机等
* 动态IP地址：请求地址的时候用了DHCP协议
* DHCP客户端请求IP地址的过程(逆向ARP)
* DHCP服务器必须静态地址
* 释放租约：ipconfig/release
* **FTP协议的主动模式和被动模式（TCP,无UDP）**
* 主动模式：ftp客户端告诉ftp服务器使用什么端口侦听，ftp服务器和客户端的这个端口建立连接，源端口是20
* 被动模式(PASV)：服务器在指定范围内的某个端口被动等待客户端发起连接
*  1、主动FTP：  
            命令连接：客户端 &gt;1024端口 -&gt; 服务器 21端口  
            数据连接：客户端 &gt;1024端口 <- 服务器 20端口 
* 2、被动FTP： 
            命令连接：客户端 >1024端口 -&gt; 服务器 21端口 
            数据连接：客户端 &gt;1024端口 -&gt; 服务器 &gt;1024端口
* 主动与被动FTP优缺点：       
   主动FTP对FTP服务器的管理有利，但对客户端的管理不利。因为FTP服务器企图与客户端的高位随机端口建立连接，而这个端口很有可能被客户端的防火墙阻塞掉。被动FTP对FTP客户端的管理有利，但对服务器端的管理不利。因为客户端要与服务器端建立两个连接，其中一个连到一个高位随机端口，而这个端口很有可能被服务器端的防火墙阻塞掉。
* **远程终端协议TELNET**
* 默认使用TCP23端口
* 可以通过打开telnet客户端来telnet ip 来远程访问服务器或者
* **远程桌面协议RDP**
* TCP:3389端口
* **HTTP协议**
* TCP：80
## 网络层（IP、ARP、RARP、ICMP）

## 传输层（TCP、UDP）
* TCP:需要将要传输的文件分段、 建立会话、可靠传输、流量控制
* UDP:一个数据包就能够完成数据通信、不分段、无会话、无流量控制、不可靠传输（屏幕广播）
* 传输层协议和应用层协议的关系：
* 1.TCP+端口或UDP+端口：标识一个应用层协议
* 特殊：DNS协议可以用UDP或者TCP的53端口来标识
* 网络安全：只开必要的服务或者TCP端口。
* 服务使用TCP或UDP的端口侦听客户端请求
* 客户端使用IP地址定位服务器 使用目标端口 定位服务
* **查看服务侦听的端口：**
* netstat -an
* netstat -n 查看建立的会话
* netstat -nb 查看建立会话的进程
* telnet IP+端口 来访问端口
* 使用端口扫描工具，扫描一波网段的端口，来获得电脑的端口，进行侵入或者控制。
* **TCP协议特点（面向字节流）：**
* TCP连接的端点是套接字（端口号拼接IP地址即构成了套接字）
* TCP如何实现可靠传输：
* 1.停止等待协议
* ARQ--自动重传请求ARQ--信道利用率太低
* 2.流水线传输
* 连续ARQ协议
* 确认号和数据包长度有关
* TCP首部：
* 6个标志位：
* URG－紧急指针有效
* ACK－确认序号有效
* PSH－接收方应尽快将这个报文段交给应用层
* RST－连接重置
* SYN－同步序号用来发起一个连接
* FIN－表示将要终止一个连接
* TCP如何实现流量控制
* TCP如何避免网络拥塞